<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Opencvwithpythonbyexample : Build real-world computer vision applications and develop cool demos using OpenCV for Python">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>OpenCV With Python By Example</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/ilikeyml/OpenCVWithPythonByExample">View on GitHub</a>
          <a href="http://ilikeyml.github.io/OpenCVWithPythonByExample/"><h1 id="project_title">OpenCV With Python By Example</h1></a>
          <h2 id="project_tagline">Build real-world computer vision applications and develop cool demos using OpenCV for Python</h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
<h2>图像形状变化</h2>
<p><strong>1.图像大小变化</strong><br>
将某点 <em>(x,y)</em> 经扩大或缩小后，变化到 <em>(X,Y)</em> 所在的位置上。</p>
<p><a href="http://www.codecogs.com/eqnedit.php?latex=\begin{matrix}&amp;space;X=S_x*x\\&amp;space;Y=S_y*y&amp;space;\end{matrix}" target="_blank"><img src="http://latex.codecogs.com/gif.latex?\begin{matrix}&amp;space;X=S_x*x\\&amp;space;Y=S_y*y&amp;space;\end{matrix}" title="\begin{matrix} X=S_x*x\\ Y=S_y*y \end{matrix}"></a>
</p>
<p>变换矩阵
</p>
<p><a href="http://www.codecogs.com/eqnedit.php?latex=\begin{bmatrix}&amp;space;X\\&amp;space;Y&amp;space;\end{bmatrix}=\begin{bmatrix}&amp;space;S_x&amp;space;&amp;0&amp;space;\\&amp;space;0&amp;S_y&amp;space;\end{bmatrix}\begin{bmatrix}&amp;space;x\\&amp;space;y&amp;space;\end{bmatrix}" target="_blank"><img src="http://latex.codecogs.com/gif.latex?\begin{bmatrix}&amp;space;X\\&amp;space;Y&amp;space;\end{bmatrix}=\begin{bmatrix}&amp;space;S_x&amp;space;&amp;0&amp;space;\\&amp;space;0&amp;S_y&amp;space;\end{bmatrix}\begin{bmatrix}&amp;space;x\\&amp;space;y&amp;space;\end{bmatrix}" title="\begin{bmatrix} X\\ Y \end{bmatrix}=\begin{bmatrix} S_x &amp;0 \\ 0&amp;S_y \end{bmatrix}\begin{bmatrix} x\\ y \end{bmatrix}"></a> </p>
<p><strong>2.位置的变化</strong><br>
像素平移 </p>
<p><a href="http://www.codecogs.com/eqnedit.php?latex=\begin{matrix}&amp;space;X=x&amp;plus;b_x\\Y=y&amp;plus;b_y&amp;space;\end{matrix}" target="_blank"><img src="http://latex.codecogs.com/gif.latex?\begin{matrix}&amp;space;X=x&amp;plus;b_x\\Y=y&amp;plus;b_y&amp;space;\end{matrix}" title="\begin{matrix} X=x+b_x\\Y=y+b_y \end{matrix}"></a></p>
<p>变换矩阵
</p>
<p><a href="http://www.codecogs.com/eqnedit.php?latex=\begin{bmatrix}&amp;space;x'\\&amp;space;y'&amp;space;\end{bmatrix}=&amp;space;\begin{bmatrix}&amp;space;1&amp;&amp;space;0&amp;space;\\&amp;space;0&amp;&amp;space;1&amp;space;\end{bmatrix}&amp;space;\begin{bmatrix}&amp;space;x\\&amp;space;y&amp;space;\end{bmatrix}&amp;plus;\begin{bmatrix}&amp;space;b_x\\&amp;space;b_y&amp;space;\end{bmatrix}" target="_blank"><img src="http://latex.codecogs.com/gif.latex?\begin{bmatrix}&amp;space;x'\\&amp;space;y'&amp;space;\end{bmatrix}=&amp;space;\begin{bmatrix}&amp;space;1&amp;&amp;space;0&amp;space;\\&amp;space;0&amp;&amp;space;1&amp;space;\end{bmatrix}&amp;space;\begin{bmatrix}&amp;space;x\\&amp;space;y&amp;space;\end{bmatrix}&amp;plus;\begin{bmatrix}&amp;space;b_x\\&amp;space;b_y&amp;space;\end{bmatrix}" title="\begin{bmatrix} x'\\ y' \end{bmatrix}= \begin{bmatrix} 1&amp; 0 \\ 0&amp; 1 \end{bmatrix} \begin{bmatrix} x\\ y \end{bmatrix}+\begin{bmatrix} x_0\\ y_0 \end{bmatrix}"></a></p>
<p><strong>3.图像的旋转</strong><br>
逆时针旋转θ角度的表达式
</p>
<p><a href="http://www.codecogs.com/eqnedit.php?latex=\begin{matrix}&amp;space;X=x*cos\theta&amp;space;&amp;plus;&amp;space;y*sin\theta&amp;space;\\&amp;space;Y=-x*sin\theta&amp;space;&amp;plus;&amp;space;y*cos\theta&amp;space;\end{matrix}" target="_blank"><img src="http://latex.codecogs.com/gif.latex?\begin{matrix}&amp;space;X=x*cos\theta&amp;space;&amp;plus;&amp;space;y*sin\theta&amp;space;\\&amp;space;Y=-x*sin\theta&amp;space;&amp;plus;&amp;space;y*cos\theta&amp;space;\end{matrix}" title="\begin{matrix} X=x*cos\theta + y*sin\theta \\ Y=-x*sin\theta + y*cos\theta \end{matrix}"></a>
</p>
<p>变换矩阵
</p>
<p><a href="http://www.codecogs.com/eqnedit.php?latex=\begin{bmatrix}&amp;space;X\\&amp;space;Y&amp;space;\end{bmatrix}=\begin{bmatrix}&amp;space;cos\theta&amp;space;&amp;sin\theta&amp;space;\\&amp;space;-sin\theta&amp;&amp;space;cos\theta&amp;space;\end{bmatrix}\begin{bmatrix}&amp;space;x\\&amp;space;y&amp;space;\end{bmatrix}" target="_blank"><img src="http://latex.codecogs.com/gif.latex?\begin{bmatrix}&amp;space;X\\&amp;space;Y&amp;space;\end{bmatrix}=\begin{bmatrix}&amp;space;cos\theta&amp;space;&amp;sin\theta&amp;space;\\&amp;space;-sin\theta&amp;&amp;space;cos\theta&amp;space;\end{bmatrix}\begin{bmatrix}&amp;space;x\\&amp;space;y&amp;space;\end{bmatrix}" title="\begin{bmatrix} X\\ Y \end{bmatrix}=\begin{bmatrix} cos\theta &amp;sin\theta \\ -sin\theta&amp; cos\theta \end{bmatrix}\begin{bmatrix} x\\ y \end{bmatrix}"></a>
</p>
<p><strong>4.齐次坐标</strong>
</p>
<p><a href="http://www.codecogs.com/eqnedit.php?latex=\begin{bmatrix}&amp;space;X\\Y&amp;space;\\&amp;space;1&amp;space;\end{bmatrix}=\begin{bmatrix}&amp;space;a_1_1&amp;space;&amp;a_1_2&amp;space;&amp;a_1_3&amp;space;\\&amp;space;a_2_1&amp;space;&amp;&amp;space;a_2_2&amp;space;&amp;&amp;space;a_2_3\\&amp;space;0&amp;space;&amp;0&amp;space;&amp;&amp;space;1&amp;space;\end{bmatrix}\begin{bmatrix}&amp;space;x\\y&amp;space;\\&amp;space;1&amp;space;\end{bmatrix}" target="_blank"><img src="http://latex.codecogs.com/gif.latex?\begin{bmatrix}&amp;space;X\\Y&amp;space;\\&amp;space;1&amp;space;\end{bmatrix}=\begin{bmatrix}&amp;space;a_1_1&amp;space;&amp;a_1_2&amp;space;&amp;a_1_3&amp;space;\\&amp;space;a_2_1&amp;space;&amp;&amp;space;a_2_2&amp;space;&amp;&amp;space;a_2_3\\&amp;space;0&amp;space;&amp;0&amp;space;&amp;&amp;space;1&amp;space;\end{bmatrix}\begin{bmatrix}&amp;space;x\\y&amp;space;\\&amp;space;1&amp;space;\end{bmatrix}" title="\begin{bmatrix} X\\Y \\ 1 \end{bmatrix}=\begin{bmatrix} a_1_1 &amp;a_1_2 &amp;a_1_3 \\ a_2_1 &amp; a_2_2 &amp; a_2_3\\ 0 &amp;0 &amp; 1 \end{bmatrix}\begin{bmatrix} x\\y \\ 1 \end{bmatrix}"></a>
</p>
<p>任何变换都可以由此齐次变换得到
</p>
<p><strong><em>Example</em></strong><br>
-图像缩放 </p>
<p><code># -*-coding:utf-8-*-</code><br>
<code>import cv2 as cv</code><br>
<code>import numpy as np</code><br>
<code>img = cv.imread("../ImageSource/coffee.jpg")</code><br>
<code>r, c = r, c = img.shape[:2]</code><br>
<code>cv.imshow("in", img)</code><br>
<code>#图像缩放</code><br>
<code>img_scale = cv.resize(img, (180, 600), 1, 1, cv.INTER_LINEAR)</code><br>
<code>cv.imshow("scale", img_scale)</code><br>
<code>print img_scale.shape</code>  <br>
<img src="accessories/imgScale.png" alt="Image Scale"> </p>
<p>-图像平移
</p>
<p><code>transform_matrix = np.array([[1, 0, 70], [0, 1, 100]], np.float)</code><br>
<code>print transform_matrix</code><br>
<code>img_trans = cv.warpAffine(img, transform_matrix, (c, r))</code><br>
<code>cv.imshow("img_trans", img_trans)</code><br>
<code>cv.waitKey(0)</code>
</p>
<p><img src="accessories/imgShift.png" alt="Image Shift">
</p>
<p>-图像旋转
</p>
<p><code>rot_matrix = cv.getRotationMatrix2D((c/2, r/2), 30, 1)</code><br>
<code>img_rot = cv.warpAffine(img, rot_matrix, (c, r))</code><br>
<code>cv.imshow("img_rot", img_rot)</code>
</p>
<p><img src="accessories/imgRotation.png" alt="Image Rotation">
</p>
<p>-投影变换<br>
<code>src_point = np.array([[0, 0], [c-1.0, 0], [0., r-1.0], [c-1.0, r-1.0]], np.float32)</code><br>
<code>dst_point = np.array([[0, 0], [c-1.0, 0], [int(0.33*c), r-1], [int(0.66*c), r-1]], np.float32)</code><br>
<code>projective_matrix = cv.getPerspectiveTransform(src_point, dst_point)</code><br>
<code>img_out = cv.warpPerspective(img, projective_matrix, (c, r))</code><br>
<code>cv.imshow("projective", img_out)</code><br>
<img src="accessories/imgProjective.png" alt="Image Projective"></p>
      </section>
    </div>
    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">OpenCV with Python by Example maintained by <a href="https://github.com/ilikeyml">ilikeyml</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
  </body>
</html>
